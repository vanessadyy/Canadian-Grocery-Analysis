---
title: "Lowest Product Prices across Canadian Groceries"
subtitle: "Analysis the Price per Units of Selected Product across 8 Canadian Groceries "
author: 
  - Yun Chu
  - Yiyue Deng
  - Tiarui Fu
  - Yanzun Jiang
  - Felix Li
  - Wen Han Zhao
thanks: "Code and data are available at: [https://github.com/younazhao/Canadian-Grocery-Analysis](https://github.com/younazhao/Canadian-Grocery-Analysis)."
date: today
date-format: long
abstract: "This study compares the pricing of various grocers to determine which consistently offers the lowest prices across comparable product families. By analyzing data collected from market surveys over several months, we assess price differences in categories such as fresh produce, packaged goods, and household items. The results show that discount grocers generally offer the lowest prices, with regional stores occasionally providing competitive pricing in select categories. These findings provide valuable insights for consumers looking to maximize savings and for businesses aiming to refine pricing strategies. The results "
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(palmerpenguins)
data <- read.csv(file = here::here('data/01-analysis_data/analysis_data.csv'))
```


# Introduction

Canada’s grocery sector, with its high market concentration and rising consumer prices, faces increasing scrutiny over limited competition and potential collusion. The recent Competition Bureau study highlights an urgent need for pricing transparency, yet consumers lack clear, data-driven insights into which grocers consistently offer the lowest prices across core product categories. To address this, Project Hammer has compiled an unprecedented, time-stamped database of historical prices from eight major Canadian grocers—Voila, T&T, Loblaws, No Frills, Metro, Galleria, Walmart, and Save-On-Foods—with the aim of promoting fairer competition and enhancing consumer choice. While the dataset is extensive, a structured analysis is essential to identify which retailer consistently provides the best value.

This study fills that gap by rigorously analyzing Project Hammer’s data from February to November 2024 to answer the question: Which grocer is generally the cheapest across all comparable product families? Using standardized methodologies to calculate and compare average prices across thousands of items, we identify the retailer with the lowest overall pricing and examine category-specific competitive patterns, providing a comprehensive view of grocery pricing dynamics.

# Data {#sec-data}

## Overview

The data is from @projecthammer which contains Canadian Grocery Price Data from February 28, 2024 to today November 14, 2024. The 8 vendors in the dataset contains: Voila, T&T, Loblaws, No Frills, Metro, Galleria, Walmart and Save-On-Foods. The variables key to this paper are price per units, vendors, product_id, and product name. 

Price per Unit: This represents the price for each product, normalized by its unit of measurement (e.g., per kilogram, per liter, or per item). This variable is pivotal for our analysis of price comparison across vendors and is used to identify the lowest price for specific products across all vendors.

Vendors: The vendor variable identifies the specific retailer selling the product. By analyzing prices across different vendors, we can examine competitive pricing strategies and pricing trends for the same products offered by different retailers.

Product ID: The product_id is an internal identifier that uniquely represents a product at a specific vendor. This allows us to track individual products over time. However, since product_id is not consistent across vendors, we focus on the product_name to ensure accurate cross-vendor comparisons.

Product Name: The product_name variable represents the name of the product, often including details like brand and packaging size. Since product names may vary slightly across vendors (e.g., "Banana Organic" at one vendor and "Organic Banana" at another), we will standardize product names where necessary for comparison.

## Measurement
	
The measurement of data in this analysis will focus on the price per unit variable, which represents the cost of a product per its unit of measurement (e.g., per kilogram, per liter, or per item). This metric allows for a standardized comparison of prices across different Canadian grocery vendors. By analyzing the price per unit, we can identify the lowest price for each product offered by various vendors, enabling us to assess price variations and competitive pricing strategies within the market.


# Results

Our results are summarized in @tbl-modelresults.

```{r}
#| label: fig-grocerybread
#| fig-cap: Price per Unit of Milk Across Vendors
#| echo: false
# Load the necessary library
library(ggplot2)
library(dplyr)

# Filter for Multigrain Bread
df_multigrainbread <- data %>%
  filter(grepl("multigrain bread", product_name, ignore.case = TRUE))

# Create a box plot
ggplot(df_multigrainbread, aes(x = vendor, y = price_per_unit)) +
  geom_boxplot() +
  labs(title = "Price per Unit of Multigrain Bread Across Vendors",
       x = "Vendor", y = "Price per Unit") +
  theme_minimal()
```

```{r}
#| label: fig-groceryjuice
#| fig-cap: Price per Unit of 100% Juice Acrss Vendors 
#| echo: false

# Filter for 100% Juice
df_juice <- data %>%
  filter(grepl("100% Juice", product_name, ignore.case = TRUE))

# Create a graph
ggplot(df_juice, aes(x = vendor, y = price_per_unit)) +
  geom_boxplot() +
  labs(title = "Price per Unit of Multigrain Bread Across Vendors",
       x = "Vendor", y = "Price per Unit") +
  theme_minimal()
```

```{r}
#| label: fig-groceryeggplant
#| fig-cap: Price per units of Eggplant across vendors
#| echo: false

# Filter for Eggplant 
df_eggplant <- data %>%
  filter(grepl("eggplant", product_name, ignore.case = TRUE))

# Create a graph
ggplot(df_eggplant, aes(x = vendor, y = price_per_unit)) +
  geom_boxplot() +
  labs(title = "Price per Unit of Eggplant Across Vendors",
       x = "Vendor", y = "Price per Unit") +
  theme_minimal()
```


# Discussion

## 1. Correlation vs. Causation
The observed trend in prices over time may suggest a relationship between time and changes in the price of Nature Valley products. However, it is crucial to distinguish between **correlation** and **causation**. The price changes might coincide with certain periods (e.g., sales promotions or seasonal demand fluctuations), but this does not necessarily imply that time directly influences the price adjustments. Other underlying factors, such as marketing strategies, supply chain issues, or changes in consumer demand, could also be driving these variations. Therefore, while the graph shows a correlation between time and price, asserting a causal relationship would require deeper analysis, including controlling for other variables.

## 2. Missing Data
Missing data could affect the analysis and interpretation of the price trend. In this dataset, any gaps in the time series (e.g., missing records for certain dates) could lead to misleading conclusions about price stability or changes. For instance, a price drop or spike could be missed entirely if data is missing for a key period. Imputation techniques or sensitivity analyses may be necessary to address these gaps and provide a more robust understanding of the price trend. 

## 3. Sources of Bias
There are several potential sources of bias in this analysis:
- **Selection Bias**: The data only includes records from a specific vendor (e.g., Voila), which may not be representative of the overall market. Prices from other retailers or platforms could vary significantly.
- **Temporal Bias**: The analysis spans a limited timeframe, which may not capture long-term trends or seasonal variations adequately. A longer dataset might reveal different patterns.
- **Measurement Bias**: If the pricing data were collected manually or extracted from different sources, inconsistencies could introduce measurement errors. Variability in product packaging (e.g., different sizes or promotional bundles) might also distort the price comparisons.

These biases should be acknowledged when interpreting the results, and future studies could aim to include a broader range of vendors, a longer time series, and more rigorous data validation methods.


\newpage

\appendix

# Appendix {-}


# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

```{r}
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| label: fig-ppcheckandposteriorvsprior
#| layout-ncol: 2
#| fig-cap: "Examining how the model fits, and is affected by, the data"
#| fig-subcap: ["Posterior prediction check", "Comparing the posterior with the prior"]
```

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| label: fig-stanareyouokay
#| fig-cap: "Checking the convergence of the MCMC algorithm"
#| fig-subcap: ["Trace plot", "Rhat plot"]
#| layout-ncol: 2
```



\newpage


# References


